{"ast":null,"code":"import _classCallCheck from \"/Users/cyh/Desktop/bar-chart-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cyh/Desktop/bar-chart-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/cyh/Desktop/bar-chart-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/cyh/Desktop/bar-chart-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/cyh/Desktop/bar-chart-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/cyh/Desktop/bar-chart-app/src/components/barChart.jsx\";\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport Input from \"./input\";\n\nvar BarChart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BarChart, _Component);\n\n  function BarChart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, BarChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BarChart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      dataArray: [{\n        date: \"2013-01\",\n        num: 53\n      }, {\n        date: \"2013-02\",\n        num: 165\n      }, {\n        date: \"2013-03\",\n        num: 269\n      }, {\n        date: \"2013-04\",\n        num: 344\n      }, {\n        date: \"2013-05\",\n        num: 376\n      }, {\n        date: \"2013-06\",\n        num: 410\n      }, {\n        date: \"2013-07\",\n        num: 421\n      }, {\n        date: \"2013-08\",\n        num: 405\n      }, {\n        date: \"2013-09\",\n        num: 376\n      }, {\n        date: \"2013-10\",\n        num: 359\n      }, {\n        date: \"2013-11\",\n        num: 392\n      }, {\n        date: \"2013-12\",\n        num: 433\n      }, {\n        date: \"2014-01\",\n        num: 455\n      }, {\n        date: \"2014-02\",\n        num: 478\n      }],\n      inputValue: {\n        date: \"\",\n        num: \"\"\n      }\n    };\n\n    _this.drawChart = function () {\n      d3.selectAll(\"svg\").remove();\n      var margin = 60;\n      var width = 1000;\n      var height = 600;\n      var canvas = d3.select(\"#svg\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\");\n      var yScale = d3.scaleLinear().domain([0, 500]).range([height - 80, 0]);\n      canvas.append(\"g\").call(d3.axisLeft(yScale));\n      var xScale = d3.scaleBand().domain(_this.state.dataArray.map(function (d) {\n        return d.date;\n      })).range([0, width - 80]).padding(0.4);\n      canvas.append(\"g\").attr(\"transform\", \"translate(0, 520)\").call(d3.axisBottom(xScale));\n      canvas.selectAll(\"rect\").data(_this.state.dataArray).enter().append(\"rect\").attr(\"x\", function (d) {\n        return xScale(d.date);\n      }).attr(\"y\", function (d) {\n        return yScale(d.num);\n      }).attr(\"height\", function (d) {\n        return height - yScale(d.num) - 80;\n      }).attr(\"width\", xScale.bandwidth());\n      canvas.append(\"g\").attr(\"class\", \"grid\").call(d3.axisLeft(yScale).tickSize(-width, 0, 0).tickFormat(\"\"));\n    };\n\n    _this.handleChangeDate = function (event) {\n      var inputValue = _this.state.inputValue;\n      inputValue.date = event.target.value;\n\n      _this.setState({\n        inputValue: inputValue\n      });\n    };\n\n    _this.handleChangeNum = function (event) {\n      var inputValue = _this.state.inputValue;\n      inputValue.num = event.target.value;\n\n      _this.setState({\n        inputValue: inputValue\n      });\n    };\n\n    _this.handleAppend = function () {\n      var inputValue = {\n        date: _this.state.inputValue.date,\n        num: Number(_this.state.inputValue.num)\n      };\n      var dataArray = _this.state.dataArray;\n      dataArray.push(inputValue);\n\n      _this.setState({\n        dataArray: dataArray\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(BarChart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.drawChart();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.drawChart();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(Input, {\n        onAppend: this.handleAppend,\n        onChangeDate: this.handleChangeDate,\n        onChangeNum: this.handleChangeNum,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BarChart;\n}(Component);\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/cyh/Desktop/bar-chart-app/src/components/barChart.jsx"],"names":["React","Component","d3","Input","BarChart","state","dataArray","date","num","inputValue","drawChart","selectAll","remove","margin","width","height","canvas","select","append","attr","yScale","scaleLinear","domain","range","call","axisLeft","xScale","scaleBand","map","d","padding","axisBottom","data","enter","bandwidth","tickSize","tickFormat","handleChangeDate","event","target","value","setState","handleChangeNum","handleAppend","Number","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport Input from \"./input\";\n\nclass BarChart extends Component {\n    state = {\n        dataArray: [\n          {date: \"2013-01\", num: 53},\n          {date: \"2013-02\", num: 165},\n          {date: \"2013-03\", num: 269},\n          {date: \"2013-04\", num: 344},\n          {date: \"2013-05\", num: 376},\n          {date: \"2013-06\", num: 410},\n          {date: \"2013-07\", num: 421},\n          {date: \"2013-08\", num: 405},\n          {date: \"2013-09\", num: 376},\n          {date: \"2013-10\", num: 359},\n          {date: \"2013-11\", num: 392},\n          {date: \"2013-12\", num: 433},\n          {date: \"2014-01\", num: 455},\n          {date: \"2014-02\", num: 478}\n        ],\n        inputValue: {\n          date: \"\",\n          num: \"\"\n        }\n    }\n    componentDidMount() {\n        this.drawChart();\n    }\n    componentDidUpdate() {\n        this.drawChart();\n    }\n\n    drawChart = () => {   \n        d3.selectAll(\"svg\").remove();\n        const margin = 60;\n        const width = 1000;\n        const height = 600;\n    \n        const canvas = d3.select(\"#svg\")\n                       .append(\"svg\")\n                       .attr(\"width\", width)\n                       .attr(\"height\", height)\n                       .append(\"g\")\n                           .attr(\"transform\", \"translate(\" + margin + \",\" + margin + \")\");\n    \n        const yScale = d3.scaleLinear()\n                       .domain([0, 500])\n                       .range([height - 80, 0]);\n        \n        canvas.append(\"g\")\n              .call(d3.axisLeft(yScale));\n    \n    \n        const xScale = d3.scaleBand()\n                       .domain(this.state.dataArray.map((d) => d.date))\n                       .range([0, width - 80])\n                       .padding(0.4)\n    \n        canvas.append(\"g\")\n              .attr(\"transform\", \"translate(0, 520)\")\n              .call(d3.axisBottom(xScale));\n    \n    \n        canvas.selectAll(\"rect\")\n              .data(this.state.dataArray)\n              .enter()\n                  .append(\"rect\")\n                  .attr(\"x\", function(d) {\n                      return xScale(d.date);\n                  })\n                  .attr(\"y\", function(d) {\n                      return yScale(d.num);\n                  })\n                  .attr(\"height\", function(d) {\n                      return height - yScale(d.num) - 80;\n                  })\n                  .attr(\"width\", xScale.bandwidth());\n    \n        canvas.append(\"g\")\n              .attr(\"class\", \"grid\")\n              .call(d3.axisLeft(yScale)\n                      .tickSize(-width, 0, 0)\n                      .tickFormat(\"\"));\n    }\n\n    handleChangeDate = (event) => {\n        let inputValue = this.state.inputValue;\n        inputValue.date = event.target.value;\n        this.setState({inputValue});\n    }\n    handleChangeNum = (event) => {\n      let inputValue = this.state.inputValue;\n      inputValue.num = event.target.value;\n      this.setState({inputValue});\n    }\n    handleAppend = () => {\n      let inputValue = {\n          date: this.state.inputValue.date,\n          num: Number(this.state.inputValue.num)\n      }\n      let dataArray = this.state.dataArray;\n      dataArray.push(inputValue);\n      this.setState({dataArray});\n        \n    }\n    render() { \n        return (\n        <React.Fragment>\n            <div id=\"svg\"></div>\n            <Input onAppend={this.handleAppend} onChangeDate={this.handleChangeDate} onChangeNum={this.handleChangeNum} />\n        </React.Fragment>\n        );\n    }\n}\n \nexport default BarChart;"]},"metadata":{},"sourceType":"module"}